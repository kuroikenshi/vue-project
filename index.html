<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=device-width,initial-scale=1.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
    <title>vue-project</title>

    <!-- WeUI -->
    <link rel="stylesheet" href="node_modules/weui/dist/style/weui.min.css"/>
    <!-- <link rel="stylesheet" href="static/vendor/jquery-weui/dist/css/jquery-weui.css"/> -->
    
    <!-- PhotoSwipe -->
    <!-- <link rel="stylesheet" href="static/vendor/PhotoSwipe-4.1.3/photoswipe.css">
    <link rel="stylesheet" href="static/vendor/PhotoSwipe-4.1.3/default-skin/default-skin.css"> -->
  </head>
  <body>
    <div id="app"></div>
    <!-- built files will be auto injected -->

    <!-- 使用 -->
    <!-- <div class="page__bd page__bd_spacing">
       <a href="javascript:;" class="weui-btn weui-btn_primary">绿色按钮</a>
    </div> -->
    
    <!-- <script src="static/vendor/jquery/dist/jquery.min.js"></script>
    <script src="static/vendor/jquery-weui/dist/js/jquery-weui.js"></script>
    <script src="static/vendor/jquery-weui/dist/js/swiper.js"></script> -->
    
    <!-- PhotoSwipe -->
    <!-- <script type="text/javascript" src="static/vendor/PhotoSwipe-4.1.3/photoswipe.min.js"></script>
    <script type="text/javascript" src="static/vendor/PhotoSwipe-4.1.3/photoswipe-ui-default.min.js"></script> -->
    
    <script>
      /*window.onload = function(){
        if (document.documentElement.scrollHeight <= document.documentElement.clientHeight) {
          bodyTag = document.getElementsByTagName('body')[0];
          bodyTag.style.height = document.documentElement.clientWidth / screen.width * screen.height + 'px';
        }
        setTimeout(function () {
          window.scrollTo(0, 1)
        }, 0);
      };*/
      
//       window.imgsWH = {}
//       
//       function getWHs(urlList) {
//         for (let i in urlList) {
//           getWH(urlList[i])
//         }
//       }
//       
//       function getWH(url) {
//         if (window.imgsWH[url] === undefined) {
//           let img = new Image()
//           img.onload = function() {
//             console.log(this, this.width, this.height)
//             window.imgsWH[url] = [this.width, this.height]
//           }
//           img.src = url
//         }
//       }
//       

      // 代码段A == START ==
      function setGesture(el) {
        var obj = {}; //定义一个对象
        var istouch = false;
        var start = [];
        el.addEventListener("touchstart", function(e) {
          if (e.touches.length >= 2) { //判断是否有两个点在屏幕上
            istouch = true;
            start = e.touches; //得到第一组两个点
            obj.gesturestart && obj.gesturestart.call(el); //执行gesturestart方法
          };
        }, false);
        document.addEventListener("touchmove", function(e) {
          e.preventDefault();
          if (e.touches.length >= 2 && istouch) {
            var now = e.touches; //得到第二组两个点
            var scale = getDistance(now[0], now[1]) / getDistance(start[0], start[1]); //得到缩放比例，getDistance是勾股定理的一个方法
            var rotation = getAngle(now[0], now[1]) - getAngle(start[0], start[1]); //得到旋转角度，getAngle是得到夹角的一个方法
            e.scale = scale.toFixed(2);
            e.rotation = rotation.toFixed(2);
            obj.gesturemove && obj.gesturemove.call(el, e); //执行gesturemove方法
          };
        }, false);
        document.addEventListener("touchend", function(e) {
          if (istouch) {
            istouch = false;
            obj.gestureend && obj.gestureend.call(el); //执行gestureend方法
          };
        }, false);
        return obj;
      };
      
      function getDistance(p1, p2) {
        var x = p2.pageX - p1.pageX,
          y = p2.pageY - p1.pageY;
        return Math.sqrt((x * x) + (y * y));
      };
      
      function getAngle(p1, p2) {
        var x = p1.pageX - p2.pageX,
          y = p1.pageY - p2.pageY;
        return Math.atan2(y, x) * 180 / Math.PI;
      };
      // 代码段A === END ===
    </script>
  </body>
</html>
